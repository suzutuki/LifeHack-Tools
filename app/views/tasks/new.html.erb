<%= form_with model: @tasks, url: tasks_path, local: true do |form| %>
  <% @tasks.collection.each do |task| %>
    <%= fields_for 'tasks[]', task, local: true do |field| %>
      <h2>
        <p><%= field.label :"title", class: 'label' %></p><br>
        <p><%= field.text_field :title, class: 'tasks-form-field' %></p><br>
        <% if @tasks.errors.include?(:title) %>
          <div class="alert alert-danger">
            <%= @tasks.errors.messages[:title][0] %>
          </div>
        <% end %>
        <p><%= field.label :"priority", class: 'label' %></p><br>
        <p><%= field.select :priority, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                            { include_blank: '選択してください' }, { class: 'tasks-form-box', required: true } %></p><br>
        <% if @tasks.errors.include?(:priority) %>
          <div class="alert alert-danger">
            <%= @tasks.errors.messages[:priority][0] %>
          </div>
        <% end %>
        <p><%= field.label :"content", class: 'label' %></p><br>
        <p><%= field.text_area :content, class: 'tasks-form-area' %></p><br>
        <% if @tasks.errors.include?(:content) %>
          <div class="alert alert-danger">
            <%= @tasks.errors.messages[:content][0] %>
          </div>
        <% end %>
    <% end %>
  <% end %>
  <%= form.submit '一括登録' %>
  <%= link_to '戻る', task_path(current_user) %>
  </h2>
  </div>
<% end %>